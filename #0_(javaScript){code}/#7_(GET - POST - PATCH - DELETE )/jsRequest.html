<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h2>Hello JS Request</h2>
  <div id="content"></div>
</body>

<script>

  function getPosts() {
    let request = new XMLHttpRequest()
    request.open("GET", "https://jsonplaceholder.typicode.com/posts")
    request.responseType = "json"
    request.send()
    request.onload = function () {
      if (request.status >= 200 && request.status < 300) {
        let posts = request.response

        for (post of posts) {
          document.getElementById("content").innerHTML += `<h1>${post.title}</h2>`
        }
      } else {
        alert("ERROR")
      }

    }
  }

  function createNewPost() {
    let request = new XMLHttpRequest()
    request.open("POST", "https://jsonplaceholder.typicode.com/posts")
    request.responseType = "json"
    request.setRequestHeader("Accept", "application/json")
    request.setRequestHeader("Content-type", "application/json")
    let bodyParams = `{
      "title": "new repuest",
      "body": "dh dh",
      "user_id": 234
    }`
    request.send(bodyParams)
    request.onload = function () {
      if (request.status >= 200 && request.status < 300) {
        let response = request.response
        console.log(response)
        console.log(request.status)
        alert("the post has been created successfully")
      } else {
        alert("ERROR")
      }
    }
  }

  function updatePost() {
    let request = new XMLHttpRequest()
    request.open("PUT", "https://jsonplaceholder.typicode.com/posts/1")
    request.responseType = "json"
    request.setRequestHeader("Accept", "application/json")
    request.setRequestHeader("Content-type", "application/json")
    let bodyParams = `{
      "id" : 10,
      "title" : "Hello World to",
      "body" : "barcalona",
      "userId" : 10
    }`
    request.send(bodyParams)
    request.onload = function () {
      if (request.status >= 200 && request.status < 300) {
        let response = request.response
        console.log(response)
        console.log(request.status)
        alert("the post has been updated successfully")
      } else {
        alert("ERROR")
      }
    }
  }

  function deletePost() {
    let request = new XMLHttpRequest()
    request.open("DELETE", "https://jsonplaceholder.typicode.com/posts/1")
    request.responseType = "json"
    request.setRequestHeader("Accept", "application/json")
    request.setRequestHeader("Content-type", "application/json")

    request.send()
    request.onload = function () {
      if (request.status >= 200 && request.status < 300) {
        let response = request.response
        console.log(response)
        console.log(request.status)
        alert("the post has been deleted successfully")
      } else {
        alert("ERROR")
      }
    }
  }

  function getPostsWithUserFilter() {
    let request = new XMLHttpRequest()
    request.open("GET", "https://jsonplaceholder.typicode.com/posts?userId=1")
    request.responseType = "json"
    request.send()
    request.onload = function () {

      if (request.status >= 200 && request.status < 300) {
        let posts = request.response
        for (post of posts) {
          document.getElementById("content").innerHTML += `<h1>${post.title}</h2>`
        }
      } else {
        alert("ERROR")
      }

    }
  }

  // getPostsWithUserFilter()
  // deletePost()
  // updatePost()
  // getPosts()
  // createNewPost()
</script>

</html>